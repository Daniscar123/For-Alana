<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dear Alana</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêû</text></svg>">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap');

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Cormorant Garamond', Georgia, serif;
    position: relative;
    overflow: hidden;
    padding: 2rem 1.5rem;
    color: white;
  }

  /* ‚îÄ‚îÄ Night ‚îÄ‚îÄ */
  body.night {
    background: linear-gradient(170deg, #1a1a2e 0%, #16213e 40%, #0f3460 100%);
  }
  /* ‚îÄ‚îÄ Day ‚îÄ‚îÄ */
  body.day {
    background: linear-gradient(180deg, #7EC8E3 0%, #AEE1F4 30%, #D4F1FF 55%, #FFF8E7 78%, #FFEDC2 100%);
    color: #3a3a3a;
  }

  #scene-canvas {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  /* Night graph */
  .graph-edge-night {
    stroke: rgba(255,224,130,0.14);
    stroke-width: 0.8;
    animation: edgeFade 1s ease both;
  }
  .graph-node-night {
    fill: #FFE082;
    animation: twinkle 2.5s ease-in-out infinite;
    filter: url(#glow);
  }

  /* Day graph (dew silk) */
  .graph-edge-day {
    stroke: rgba(255,255,255,0.45);
    stroke-width: 0.5;
    stroke-dasharray: 2 3;
    animation: edgeFade 0.8s ease both;
  }
  .graph-node-day {
    fill: rgba(255,255,255,0.55);
    animation: dewGlint 3s ease-in-out infinite;
    filter: url(#glow);
  }

  /* Grass */
  .grass-blade {
    fill: none;
    stroke-linecap: round;
    transform-origin: var(--ox) var(--oy);
    animation: sway var(--dur) ease-in-out var(--del) infinite alternate;
  }

  /* Floaters */
  .heart-float {
    position: absolute;
    font-size: 14px;
    color: #EF9A9A;
    opacity: 0;
    animation: floatUp 4.5s ease-in infinite;
    pointer-events: none;
  }
  .seed-float {
    position: absolute;
    pointer-events: none;
    opacity: 0;
    animation: seedDrift 8s ease-in-out infinite;
  }
  .seed-float::before {
    content: '';
    display: block;
    width: 3px; height: 3px;
    background: rgba(255,255,255,0.75);
    border-radius: 50%;
    box-shadow:
      0 -5px 0 0 rgba(255,255,255,0.25),
      3px -4px 0 0 rgba(255,255,255,0.18),
      -3px -4px 0 0 rgba(255,255,255,0.18),
      1px -7px 0 0 rgba(255,255,255,0.12),
      -1px -7px 0 0 rgba(255,255,255,0.12);
  }

  /* Celestial */
  .moon {
    position: absolute; top: 6%; right: 9%;
    width: 50px; height: 50px; border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, #FFF9C4, #FFE082);
    box-shadow: 0 0 40px 15px rgba(255,248,225,0.12);
    animation: gentlePulse 6s ease-in-out infinite;
  }
  .sun {
    position: absolute; top: 6%; right: 9%;
    width: 60px; height: 60px; border-radius: 50%;
    background: radial-gradient(circle at 42% 42%, #FFFDE7, #FFD54F);
    box-shadow: 0 0 50px 20px rgba(255,213,79,0.25), 0 0 100px 50px rgba(255,213,79,0.08);
    animation: gentlePulse 6s ease-in-out infinite;
  }

  /* Ladybird */
  .ladybird-scene {
    display: flex; flex-direction: column; align-items: center;
    animation: slideUp 1s ease 0.3s both;
    position: relative; z-index: 2;
  }
  .ladybird-wrap {
    animation: bob 3s ease-in-out infinite;
    filter: drop-shadow(0 6px 12px rgba(0,0,0,0.2));
  }
  .spot { animation: spotIn 0.5s ease both; }

  /* Typography */
  .subtitle {
    font-size: 1rem; letter-spacing: 0.15em;
    text-transform: uppercase; font-weight: 400;
    animation: slideUp 1s ease both;
  }
  body.night .subtitle { color: #B39DDB; }
  body.day .subtitle { color: #795548; }

  .name {
    font-size: 3rem; font-weight: 600; line-height: 1.1;
    margin-top: 0.15rem; animation: slideUp 1s ease 0.15s both;
  }
  body.night .name { color: #F8BBD0; text-shadow: 0 0 30px rgba(248,187,208,0.25); }
  body.day .name { color: #C62828; text-shadow: 0 0 20px rgba(198,40,40,0.08); }

  .message { text-align: center; line-height: 1.75; animation: slideUp 0.8s ease 0.8s both; position: relative; z-index: 2; }
  .message .main { font-size: 1.15rem; font-style: italic; }
  body.night .message .main { color: rgba(255,255,255,0.75); }
  body.day .message .main { color: rgba(55,55,55,0.75); }

  .message .highlight { font-size: 1.3rem; font-style: normal; font-weight: 600; }
  body.night .message .highlight { color: #F8BBD0; }
  body.day .message .highlight { color: #C62828; }

  .message .from { font-size: 0.88rem; margin-top: 0.9rem; font-style: normal; }
  body.night .message .from { color: rgba(255,255,255,0.35); }
  body.day .message .from { color: rgba(55,55,55,0.4); }

  /* Controls */
  .controls-label {
    font-size: 0.68rem; letter-spacing: 0.08em;
    text-transform: uppercase; font-family: 'Courier New', monospace;
  }
  body.night .controls-label { color: rgba(255,255,255,0.35); }
  body.day .controls-label { color: rgba(80,80,80,0.4); }

  .p-display { font-family: 'Courier New', monospace; font-size: 0.82rem; min-width: 80px; }
  body.night .p-display { color: #CE93D8; }
  body.day .p-display { color: #558B2F; }

  input[type=range] { width: 120px; cursor: pointer; }
  body.night input[type=range] { accent-color: #CE93D8; }
  body.day input[type=range] { accent-color: #7CB342; }

  .btn-resample {
    border-radius: 8px; padding: 5px 14px; font-size: 0.72rem;
    cursor: pointer; font-family: 'Courier New', monospace; transition: background 0.2s;
  }
  body.night .btn-resample { background: rgba(206,147,216,0.15); border: 1px solid rgba(206,147,216,0.3); color: #CE93D8; }
  body.night .btn-resample:hover { background: rgba(206,147,216,0.25); }
  body.day .btn-resample { background: rgba(124,179,66,0.12); border: 1px solid rgba(124,179,66,0.3); color: #558B2F; }
  body.day .btn-resample:hover { background: rgba(124,179,66,0.22); }

  /* Keyframes */
  @keyframes bob {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }
  @keyframes spotIn {
    from { opacity: 0; transform: scale(0); }
    to { opacity: 1; transform: scale(1); }
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.25; }
    50% { opacity: 1; }
  }
  @keyframes dewGlint {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 0.85; }
  }
  @keyframes edgeFade { from { opacity: 0; } to { opacity: 1; } }
  @keyframes floatUp {
    0% { opacity: 0; transform: translateY(0); }
    20% { opacity: 0.6; }
    100% { opacity: 0; transform: translateY(-55px); }
  }
  @keyframes seedDrift {
    0% { opacity: 0; transform: translate(0, 0) rotate(0deg); }
    12% { opacity: 0.55; }
    88% { opacity: 0.35; }
    100% { opacity: 0; transform: translate(70px, -90px) rotate(35deg); }
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(18px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes gentlePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
  }
  @keyframes sway {
    0% { transform: rotate(calc(var(--sw) * -1)); }
    100% { transform: rotate(var(--sw)); }
  }
</style>
</head>
<body>

<svg id="scene-canvas">
  <defs>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
</svg>

<!-- Night floaters -->
<div id="night-floaters">
  <div class="heart-float" style="left:22%;top:52%;animation-delay:1.2s">&#9829;</div>
  <div class="heart-float" style="left:74%;top:48%;animation-delay:3s">&#9829;</div>
  <div class="heart-float" style="left:48%;top:62%;animation-delay:5s">&#9829;</div>
</div>

<!-- Day floaters (dandelion seeds) -->
<div id="day-floaters">
  <div class="seed-float" style="left:12%;top:28%;animation-delay:0s"></div>
  <div class="seed-float" style="left:52%;top:18%;animation-delay:2.5s"></div>
  <div class="seed-float" style="left:80%;top:32%;animation-delay:5s"></div>
  <div class="seed-float" style="left:32%;top:12%;animation-delay:7s"></div>
  <div class="seed-float" style="left:65%;top:25%;animation-delay:3.8s"></div>
</div>

<div class="moon" id="el-moon"></div>
<div class="sun" id="el-sun"></div>

<!-- Title -->
<div style="text-align:center;margin-bottom:0.6rem;position:relative;z-index:2">
  <div class="subtitle" id="greeting"></div>
  <div class="name">Alana</div>
</div>

<!-- Ladybird -->
<div class="ladybird-scene">
  <div class="ladybird-wrap">
    <svg id="ladybird" viewBox="0 0 100 110" width="130" height="143">
      <ellipse cx="50" cy="58" rx="30" ry="35" fill="#E53935"/>
      <line x1="50" y1="24" x2="50" y2="92" stroke="#222" stroke-width="1.5"/>
      <g id="spots"></g>
      <circle cx="50" cy="24" r="14" fill="#222"/>
      <circle cx="44" cy="20" r="3.5" fill="white"/>
      <circle cx="56" cy="20" r="3.5" fill="white"/>
      <circle cx="45" cy="19.5" r="1.8" fill="#222"/>
      <circle cx="57" cy="19.5" r="1.8" fill="#222"/>
      <circle cx="46" cy="18.5" r="0.8" fill="white"/>
      <circle cx="58" cy="18.5" r="0.8" fill="white"/>
      <path d="M44 12 Q40 2 34 0" stroke="#222" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M56 12 Q60 2 66 0" stroke="#222" stroke-width="2" fill="none" stroke-linecap="round"/>
      <circle cx="34" cy="0" r="2.5" fill="#222"/>
      <circle cx="66" cy="0" r="2.5" fill="#222"/>
      <path d="M45 26 Q50 31 55 26" stroke="white" stroke-width="1.2" fill="none" stroke-linecap="round"/>
      <path d="M22 45 L14 38" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M78 45 L86 38" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M20 60 L11 58" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M80 60 L89 58" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M23 75 L16 80" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M77 75 L84 80" stroke="#222" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </div>
</div>

<!-- Message -->
<div class="message" style="margin-top:0.8rem;">
  <div class="main" id="msg-main"></div>
  <div class="from">Yours, Daniel :)</div>
</div>

<!-- Controls -->
<div style="margin-top:1.8rem;text-align:center;animation:slideUp 0.6s ease 1.2s both;position:relative;z-index:2">
  <div class="controls-label" id="hint" style="margin-bottom:8px"></div>
  <div style="display:flex;align-items:center;gap:12px;justify-content:center;flex-wrap:wrap">
    <span class="p-display" id="p-label">chance: 70%</span>
    <input type="range" id="p-slider" min="0" max="100" step="5" value="70"/>
    <button class="btn-resample" id="btn-resample">shuffle &#10022;</button>
  </div>
</div>

<script>
// ‚îÄ‚îÄ Time ‚îÄ‚îÄ
const DAY = (() => { const h = new Date().getHours(); return h >= 6.5 && h < 20; })();

// ‚îÄ‚îÄ Theme ‚îÄ‚îÄ
document.body.classList.add(DAY ? 'day' : 'night');
document.getElementById('el-moon').style.display   = DAY ? 'none' : '';
document.getElementById('el-sun').style.display     = DAY ? '' : 'none';
document.getElementById('night-floaters').style.display = DAY ? 'none' : '';
document.getElementById('day-floaters').style.display   = DAY ? '' : 'none';

document.getElementById('greeting').textContent = DAY
  ? 'have a lovely day' : 'goodnight';

document.getElementById('msg-main').innerHTML = DAY
  ? 'wishing you the loveliest of days,<br/><span class="highlight">I hope this brings you good luck</span><br/>today, tomorrow, and always'
  : 'sweet dreams tonight,<br/><span class="highlight">I hope this brings you good luck</span><br/>tonight, tomorrow, and always';

document.getElementById('hint').textContent = DAY
  ? 'the spots & grass connections appear randomly \u2014 have a play \u2193'
  : 'the spots & star connections appear randomly \u2014 have a play \u2193';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚îÄ‚îÄ Ladybird spots ‚îÄ‚îÄ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const SPOTS = [
  {cx:35,cy:44,r:5.5},{cx:65,cy:44,r:5.5},
  {cx:30,cy:55,r:5},  {cx:70,cy:55,r:5},
  {cx:42,cy:58,r:4.5},{cx:58,cy:58,r:4.5},
  {cx:35,cy:70,r:4},  {cx:65,cy:70,r:4},
  {cx:45,cy:78,r:3.5},{cx:55,cy:78,r:3.5},
  {cx:50,cy:48,r:3},
];

function generateSpots(p) {
  const g = document.getElementById('spots');
  g.innerHTML = '';
  SPOTS.forEach((s, i) => {
    if (Math.random() < p) {
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',s.cx); c.setAttribute('cy',s.cy); c.setAttribute('r',s.r);
      c.setAttribute('fill','#222'); c.classList.add('spot');
      c.style.animationDelay = (0.07*i)+'s';
      c.style.transformOrigin = s.cx+'px '+s.cy+'px';
      g.appendChild(c);
    }
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚îÄ‚îÄ NIGHT: Stars G(n,p) ‚îÄ‚îÄ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const STARS = [];

function initStars() {
  STARS.length = 0;
  const w = window.innerWidth, h = window.innerHeight;
  const cx = w/2, cy = h/2;
  let att = 0;
  while (STARS.length < 25 && att < 600) {
    att++;
    const x = 15+Math.random()*(w-30), y = 10+Math.random()*(h-20);
    if (Math.hypot(x-cx,y-cy) < Math.min(w,h)*0.18) continue;
    if (STARS.some(s => Math.hypot(x-s.x,y-s.y) < 38)) continue;
    STARS.push({x,y, r:1+Math.random()*2.5, del:Math.random()*3});
  }
}

function drawStars(p) {
  const svg = document.getElementById('scene-canvas');
  const w = window.innerWidth, h = window.innerHeight;
  svg.setAttribute('viewBox','0 0 '+w+' '+h);
  svg.querySelectorAll('.graph-edge-night,.graph-node-night').forEach(e=>e.remove());

  const md = Math.min(w,h)*0.33; let ei=0;
  for (let i=0;i<STARS.length;i++) for (let j=i+1;j<STARS.length;j++) {
    const a=STARS[i],b=STARS[j];
    if (Math.hypot(a.x-b.x,a.y-b.y)>md) continue;
    if (Math.random()<p) {
      const l=document.createElementNS('http://www.w3.org/2000/svg','line');
      l.setAttribute('x1',a.x);l.setAttribute('y1',a.y);
      l.setAttribute('x2',b.x);l.setAttribute('y2',b.y);
      l.classList.add('graph-edge-night');
      l.style.animationDelay=(ei*0.025)+'s';
      svg.appendChild(l); ei++;
    }
  }
  STARS.forEach(s => {
    const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
    c.setAttribute('cx',s.x);c.setAttribute('cy',s.y);c.setAttribute('r',s.r);
    c.classList.add('graph-node-night');
    c.style.animationDelay=s.del+'s';
    c.style.animationDuration=(2+Math.random()*2)+'s';
    svg.appendChild(c);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚îÄ‚îÄ DAY: Grass meadow G(n,p) ‚îÄ‚îÄ
// Blades = vertices at their tips.
// Dew-silk threads between nearby tips
// appear independently with probability p.
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const BLADES = [];

const GC = [ // grass colours ‚Äî layered from pale far to rich near
  '#81C784','#66BB6A','#4CAF50','#43A047','#388E3C',
  '#2E7D32','#558B2F','#689F38','#7CB342','#33691E',
];

function initGrass() {
  BLADES.length = 0;
  const w = window.innerWidth, h = window.innerHeight;
  const top_ = h * 0.62, bot = h + 8;
  const count = Math.max(55, Math.round(w / 8)); // more blades on wider screens

  for (let i = 0; i < count; i++) {
    const bx = w*0.01 + Math.random()*w*0.98;
    const by = top_ + Math.random()*(bot - top_)*0.45;
    const depth = (by - top_) / (bot - top_);     // 0 = far, 1 = near
    const ht = 35 + Math.random()*65 + depth*35;
    const lean = (Math.random()-0.5) * 45;
    const tx = bx + lean;
    const ty = by - ht;
    const cx_ = bx + lean*0.55;
    const cy_ = by - ht*0.55;
    const col = GC[Math.floor(Math.random()*GC.length)];
    const thick = 1.5 + Math.random()*1.5 + depth*2;
    const sw = 1.2 + Math.random()*3;
    const sd = 2.5 + Math.random()*2.5;
    const sdel = Math.random()*4;

    BLADES.push({bx,by,tx,ty,cx:cx_,cy:cy_,col,thick,sw,sd,sdel,depth});
  }
  BLADES.sort((a,b) => a.depth - b.depth); // painter's order
}

function drawGrass(p) {
  const svg = document.getElementById('scene-canvas');
  const w = window.innerWidth, h = window.innerHeight;
  svg.setAttribute('viewBox','0 0 '+w+' '+h);
  svg.querySelectorAll('.grass-blade,.graph-edge-day,.graph-node-day,.grass-ground').forEach(e=>e.remove());

  // Soft ground
  const gr = document.createElementNS('http://www.w3.org/2000/svg','rect');
  gr.setAttribute('x',0); gr.setAttribute('y',h*0.84);
  gr.setAttribute('width',w); gr.setAttribute('height',h*0.18);
  gr.setAttribute('fill','#66BB6A'); gr.setAttribute('opacity','0.18');
  gr.setAttribute('rx','8'); gr.classList.add('grass-ground');
  svg.appendChild(gr);

  // Dew-silk edges G(n,p)
  const md = 85; let ei = 0;
  for (let i=0;i<BLADES.length;i++) for (let j=i+1;j<BLADES.length;j++) {
    const a=BLADES[i],b=BLADES[j];
    if (Math.hypot(a.tx-b.tx,a.ty-b.ty)>md) continue;
    if (Math.random()<p) {
      const l=document.createElementNS('http://www.w3.org/2000/svg','line');
      l.setAttribute('x1',a.tx);l.setAttribute('y1',a.ty);
      l.setAttribute('x2',b.tx);l.setAttribute('y2',b.ty);
      l.classList.add('graph-edge-day');
      l.style.animationDelay=(ei*0.015)+'s';
      svg.appendChild(l); ei++;
    }
  }

  // Blades
  BLADES.forEach(b => {
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.setAttribute('d','M'+b.bx+','+b.by+' Q'+b.cx+','+b.cy+' '+b.tx+','+b.ty);
    path.setAttribute('stroke',b.col);
    path.setAttribute('stroke-width',b.thick);
    path.classList.add('grass-blade');
    path.style.setProperty('--sw', b.sw+'deg');
    path.style.setProperty('--dur', b.sd+'s');
    path.style.setProperty('--del', b.sdel+'s');
    path.style.setProperty('--ox', b.bx+'px');
    path.style.setProperty('--oy', b.by+'px');
    path.style.opacity = 0.45 + b.depth*0.55;
    svg.appendChild(path);
  });

  // Dew-drop nodes at tips
  BLADES.forEach(b => {
    const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
    c.setAttribute('cx',b.tx);c.setAttribute('cy',b.ty);c.setAttribute('r',1.6+b.depth*0.6);
    c.classList.add('graph-node-day');
    c.style.animationDelay=(Math.random()*3)+'s';
    c.style.animationDuration=(2+Math.random()*2.5)+'s';
    svg.appendChild(c);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚îÄ‚îÄ Controls ‚îÄ‚îÄ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const slider = document.getElementById('p-slider');
const label  = document.getElementById('p-label');
const btn    = document.getElementById('btn-resample');

function getP() { return parseInt(slider.value)/100; }

function refresh(newPos) {
  const pv = getP();
  label.textContent = 'chance: '+Math.round(pv*100)+'%';
  generateSpots(pv);
  if (DAY) { if (newPos) initGrass(); drawGrass(pv); }
  else     { if (newPos) initStars(); drawStars(pv); }
}

slider.addEventListener('input', () => refresh(false));
btn.addEventListener('click', () => refresh(true));

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ
if (DAY) { initGrass(); drawGrass(0.7); } else { initStars(); drawStars(0.7); }
generateSpots(0.7);

let rt;
window.addEventListener('resize', () => { clearTimeout(rt); rt = setTimeout(()=>refresh(true),250); });
</script>
</body>
</html>
