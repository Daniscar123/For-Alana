<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Dear Alana</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêû</text></svg>">
<style>
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap');
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

html,body{height:100%;overflow:hidden}
body{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  font-family:'Cormorant Garamond',Georgia,serif;
  position:relative;padding:1.2rem 1.5rem;color:white;
}
body.night{background:linear-gradient(170deg,#1a1a2e 0%,#16213e 40%,#0f3460 100%)}
body.day{background:linear-gradient(180deg,#7EC8E3 0%,#AEE1F4 30%,#D4F1FF 55%,#FFF8E7 78%,#FFEDC2 100%);color:#3a3a3a}

#cv{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}

/* Night */
.en{stroke:rgba(255,224,130,.14);stroke-width:.8;animation:ef 1s ease both}
.nn{fill:#FFE082;animation:tw 2.5s ease-in-out infinite;filter:url(#gl)}
/* Day */
.ed{stroke:rgba(180,230,255,.55);stroke-width:1.2;animation:ef .8s ease both}
.nd{fill:rgba(220,245,255,.7);animation:dg 3s ease-in-out infinite;filter:url(#gl)}
.gb{fill:none;stroke-linecap:round;transform-origin:var(--ox) var(--oy);animation:sw var(--dur) ease-in-out var(--del) infinite alternate}

/* Floaters */
.hf{position:absolute;font-size:13px;color:#EF9A9A;opacity:0;animation:fu 4.5s ease-in infinite;pointer-events:none}
.sf{position:absolute;pointer-events:none;opacity:0;animation:sd 8s ease-in-out infinite}
.sf::before{content:'';display:block;width:3px;height:3px;background:rgba(255,255,255,.7);border-radius:50%;box-shadow:0 -5px 0 0 rgba(255,255,255,.22),3px -4px 0 0 rgba(255,255,255,.15),-3px -4px 0 0 rgba(255,255,255,.15)}

/* Crescent moon (Ramadan) */
.crescent{
  position:absolute;top:5%;right:7%;width:50px;height:50px;
  border-radius:50%;cursor:pointer;z-index:10;
  background:radial-gradient(circle at 35% 35%,#FFF9C4,#FFE082);
  box-shadow:0 0 35px 12px rgba(255,248,225,.12);
  animation:gp 6s ease-in-out infinite;
}
.crescent .shadow{
  position:absolute;top:-4px;right:-6px;width:40px;height:40px;
  border-radius:50%;
}
body.night .crescent .shadow{background:#16213e}
body.day .crescent .shadow{background:#AEE1F4}

/* Full moon (non-Ramadan) */
.fullmoon{
  position:absolute;top:5%;right:7%;width:50px;height:50px;
  border-radius:50%;
  background:radial-gradient(circle at 35% 35%,#FFF9C4,#FFE082);
  box-shadow:0 0 35px 12px rgba(255,248,225,.12);
  animation:gp 6s ease-in-out infinite;
}
.sun{
  position:absolute;top:5%;right:7%;width:58px;height:58px;border-radius:50%;
  background:radial-gradient(circle at 42% 42%,#FFFDE7,#FFD54F);
  box-shadow:0 0 50px 20px rgba(255,213,79,.25),0 0 100px 50px rgba(255,213,79,.08);
  animation:gp 6s ease-in-out infinite;
}

/* Prayer times tooltip */
.pt-tip{
  position:absolute;top:calc(5% + 58px);right:5%;
  border-radius:14px;padding:.7rem .9rem;
  backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);
  font-family:'Courier New',monospace;font-size:.7rem;
  z-index:20;opacity:0;pointer-events:none;
  transform:translateY(-6px);transition:opacity .3s,transform .3s;
  min-width:160px;
}
.pt-tip.show{opacity:1;pointer-events:auto;transform:translateY(0)}
body.night .pt-tip{background:rgba(22,33,62,.85);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.6)}
body.day .pt-tip{background:rgba(255,255,255,.8);border:1px solid rgba(0,0,0,.06);color:rgba(55,55,55,.65)}
.pt-row{display:flex;justify-content:space-between;padding:2px 0}
.pt-row span:last-child{font-weight:600}
body.night .pt-row span:last-child{color:#F8BBD0}
body.day .pt-row span:last-child{color:#C62828}
.pt-credit{font-size:.5rem;opacity:.4;margin-top:5px;text-align:center}
.pt-credit a{color:inherit}

/* Ladybird */
.lbs{display:flex;flex-direction:column;align-items:center;animation:su 1s ease .3s both;position:relative;z-index:2}
.lbw{animation:bob 3s ease-in-out infinite;filter:drop-shadow(0 5px 10px rgba(0,0,0,.18))}
.sp{animation:si .5s ease both}

/* Type */
.sub{font-size:.95rem;letter-spacing:.15em;text-transform:uppercase;font-weight:400;animation:su 1s ease both}
body.night .sub{color:#B39DDB} body.day .sub{color:#795548}
.nm{font-size:2.8rem;font-weight:600;line-height:1.1;margin-top:.1rem;animation:su 1s ease .15s both}
body.night .nm{color:#F8BBD0;text-shadow:0 0 30px rgba(248,187,208,.25)}
body.day .nm{color:#C62828;text-shadow:0 0 20px rgba(198,40,40,.08)}

.msg{text-align:center;line-height:1.7;animation:su .8s ease .8s both;position:relative;z-index:2;max-width:340px}
.msg .main{font-size:1.05rem;font-style:italic}
body.night .msg .main{color:rgba(255,255,255,.7)} body.day .msg .main{color:rgba(55,55,55,.7)}
.msg .hl{font-size:1.2rem;font-style:normal;font-weight:600}
body.night .msg .hl{color:#F8BBD0} body.day .msg .hl{color:#C62828}
.msg .fr{font-size:.85rem;margin-top:.7rem;font-style:normal}
body.night .msg .fr{color:rgba(255,255,255,.3)} body.day .msg .fr{color:rgba(55,55,55,.35)}

/* Ramadan line in message */
.ram-line{font-family:'Courier New',monospace;font-size:.78rem;margin-top:.5rem;letter-spacing:.02em}
body.night .ram-line{color:rgba(255,255,255,.4)} body.day .ram-line{color:rgba(55,55,55,.4)}
.ram-line strong{font-size:.85rem}
body.night .ram-line strong{color:#CE93D8} body.day .ram-line strong{color:#558B2F}
.ram-day-tag{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;opacity:.5;font-family:'Courier New',monospace}

/* Tap hint on crescent */
.tap-hint{
  position:absolute;top:calc(5% + 52px);right:calc(7% + 8px);
  font-size:.55rem;font-family:'Courier New',monospace;
  opacity:0;animation:su .6s ease 2.5s both;pointer-events:none;
}
body.night .tap-hint{color:rgba(255,255,255,.25)} body.day .tap-hint{color:rgba(80,80,80,.3)}

@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
@keyframes si{from{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}
@keyframes tw{0%,100%{opacity:.25}50%{opacity:1}}
@keyframes dg{0%,100%{opacity:.25}50%{opacity:.9}}
@keyframes ef{from{opacity:0}to{opacity:1}}
@keyframes fu{0%{opacity:0;transform:translateY(0)}20%{opacity:.6}100%{opacity:0;transform:translateY(-50px)}}
@keyframes sd{0%{opacity:0;transform:translate(0,0) rotate(0)}12%{opacity:.5}88%{opacity:.3}100%{opacity:0;transform:translate(60px,-80px) rotate(30deg)}}
@keyframes su{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes gp{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}
@keyframes sw{0%{transform:rotate(calc(var(--sw)*-1))}100%{transform:rotate(var(--sw))}}
</style>
</head>
<body>

<svg id="cv"><defs>
  <filter id="gl"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
</defs></svg>

<div id="nfl">
  <div class="hf" style="left:20%;top:45%;animation-delay:1.2s">&#9829;</div>
  <div class="hf" style="left:76%;top:42%;animation-delay:3s">&#9829;</div>
  <div class="hf" style="left:50%;top:58%;animation-delay:5s">&#9829;</div>
</div>
<div id="dfl">
  <div class="sf" style="left:12%;top:25%;animation-delay:0s"></div>
  <div class="sf" style="left:55%;top:15%;animation-delay:2.5s"></div>
  <div class="sf" style="left:82%;top:30%;animation-delay:5s"></div>
  <div class="sf" style="left:35%;top:10%;animation-delay:7s"></div>
</div>

<!-- Celestial: set by JS -->
<div id="el-moon" style="display:none"></div>
<div id="el-sun" class="sun" style="display:none"></div>
<!-- Prayer times tooltip -->
<div class="pt-tip" id="pt-tip"></div>
<div class="tap-hint" id="tap-hint"></div>

<div style="text-align:center;margin-bottom:.4rem;position:relative;z-index:2">
  <div class="sub" id="greeting"></div>
  <div class="nm">Alana</div>
</div>

<div class="lbs">
  <div class="lbw">
    <svg viewBox="0 0 100 110" width="115" height="126">
      <ellipse cx="50" cy="58" rx="30" ry="35" fill="#E53935"/>
      <line x1="50" y1="24" x2="50" y2="92" stroke="#222" stroke-width="1.5"/>
      <g id="spots"></g>
      <circle cx="50" cy="24" r="14" fill="#222"/>
      <circle cx="44" cy="20" r="3.5" fill="white"/><circle cx="56" cy="20" r="3.5" fill="white"/>
      <circle cx="45" cy="19.5" r="1.8" fill="#222"/><circle cx="57" cy="19.5" r="1.8" fill="#222"/>
      <circle cx="46" cy="18.5" r=".8" fill="white"/><circle cx="58" cy="18.5" r=".8" fill="white"/>
      <path d="M44 12Q40 2 34 0" stroke="#222" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M56 12Q60 2 66 0" stroke="#222" stroke-width="2" fill="none" stroke-linecap="round"/>
      <circle cx="34" cy="0" r="2.5" fill="#222"/><circle cx="66" cy="0" r="2.5" fill="#222"/>
      <path d="M45 26Q50 31 55 26" stroke="white" stroke-width="1.2" fill="none" stroke-linecap="round"/>
      <path d="M22 45L14 38" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M78 45L86 38" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M20 60L11 58" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M80 60L89 58" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M23 75L16 80" stroke="#222" stroke-width="2" stroke-linecap="round"/>
      <path d="M77 75L84 80" stroke="#222" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </div>
</div>

<div class="msg" style="margin-top:.5rem" id="msg-wrap">
  <div class="main" id="msg-main"></div>
  <div id="ram-insert"></div>
  <div class="fr">Yours, Daniel :)</div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// RAMADAN DATA (Bath)
// [date, label, suhoor, fajr, dhuhr, asr, maghrib, isha]
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const R=[
['2026-02-25','Day 8','5:28','7:03','12:27','15:08','17:46','19:06'],
['2026-02-26','Day 9','5:26','7:01','12:27','15:09','17:48','19:07'],
['2026-02-27','Day 10','5:24','6:59','12:27','15:10','17:49','19:09'],
['2026-02-28','Day 11','5:22','6:57','12:27','15:12','17:51','19:10'],
['2026-03-01','Day 12','5:19','6:55','12:27','15:13','17:53','19:12'],
['2026-03-02','Day 13','5:17','6:52','12:27','15:14','17:55','19:13'],
['2026-03-03','Day 14','5:15','6:50','12:26','15:15','17:56','19:15'],
['2026-03-04','Day 15','5:13','6:48','12:26','15:17','17:58','19:16'],
['2026-03-05','Day 16','5:11','6:46','12:26','15:18','18:00','19:18'],
['2026-03-06','Day 17','5:09','6:44','12:26','15:19','18:02','19:19'],
['2026-03-07','Day 18','5:07','6:42','12:25','15:20','18:03','19:21'],
['2026-03-08','Day 19','5:05','6:39','12:25','15:21','18:05','19:22'],
['2026-03-09','Day 20','5:03','6:37','12:25','15:23','18:07','19:24'],
['2026-03-10','Day 21','5:01','6:35','12:25','15:24','18:08','19:25'],
['2026-03-11','Day 22','4:58','6:33','12:24','15:25','18:10','19:27'],
['2026-03-12','Day 23','4:56','6:30','12:24','15:26','18:12','19:28'],
['2026-03-13','Day 24','4:54','6:28','12:24','15:27','18:14','19:30'],
['2026-03-14','Day 25','4:52','6:26','12:24','15:28','18:15','19:31'],
['2026-03-15','Day 26','4:50','6:24','12:23','15:29','18:17','19:33'],
['2026-03-16','Day 27','4:48','6:21','12:23','15:30','18:19','19:34'],
['2026-03-17','Day 28','4:46','6:19','12:23','15:31','18:20','19:36'],
['2026-03-18','Day 29','4:43','6:17','12:22','15:32','18:22','19:37'],
['2026-03-19','Day 30','4:41','6:15','12:22','15:34','18:24','19:38'],
['2026-03-20','Eid ul-Fitr','4:39','6:12','12:22','15:35','18:25','19:40'],
];

function todayStr(){const d=new Date();return d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0')+'-'+String(d.getDate()).padStart(2,'0')}
function tMin(t){const[h,m]=t.split(':').map(Number);return h*60+m}
function nowM(){const d=new Date();return d.getHours()*60+d.getMinutes()}
function fmtCD(m){if(m<=0)return'';const h=Math.floor(m/60),mn=m%60;return h>0?h+'h\u2009'+mn+'m':mn+'m'}

const TODAY_R = R.find(r=>r[0]===todayStr());
const IS_RAMADAN = !!TODAY_R;
const IS_EID = TODAY_R && TODAY_R[1]==='Eid ul-Fitr';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TIME + THEME
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const DAY=(()=>{const h=new Date().getHours();return h>=7&&h<20})();
document.body.classList.add(DAY?'day':'night');

// Moon / Sun
const moonEl = document.getElementById('el-moon');
const sunEl = document.getElementById('el-sun');

if(DAY){
  sunEl.style.display='';
  document.getElementById('nfl').style.display='none';
} else {
  // Show crescent during Ramadan, full moon otherwise
  if(IS_RAMADAN){
    moonEl.className='crescent';
    moonEl.innerHTML='<div class="shadow"></div>';
    moonEl.style.display='';
    moonEl.style.cursor='pointer';
  } else {
    moonEl.className='fullmoon';
    moonEl.innerHTML='';
    moonEl.style.display='';
  }
  document.getElementById('dfl').style.display='none';
}

// Greeting
document.getElementById('greeting').textContent = DAY ? 'have a lovely day' : 'goodnight';

// Message + Ramadan
const msgEl = document.getElementById('msg-main');
const ramEl = document.getElementById('ram-insert');

if(IS_EID){
  msgEl.innerHTML = DAY
    ? 'Eid Mubarak! \u2728<br/><span class="hl">wishing you the most joyful day</span><br/>today, tomorrow, and always'
    : 'Eid Mubarak! \u2728<br/><span class="hl">I hope this brings you good luck</span><br/>tonight, tomorrow, and always';
} else if(IS_RAMADAN){
  const suhoor = TODAY_R[2];
  const iftar = TODAY_R[6]; // maghrib

  if(DAY){
    msgEl.innerHTML = 'wishing you the loveliest of days,<br/><span class="hl">I hope this brings you good luck</span><br/>today, tomorrow, and always';
  } else {
    msgEl.innerHTML = 'sweet dreams tonight,<br/><span class="hl">I hope this brings you good luck</span><br/>tonight, tomorrow, and always';
  }

  // Ramadan line woven under the message
  function updateCD(){
    const n=nowM(), su=tMin(suhoor), ift=tMin(iftar);
    let cdText='';
    if(!DAY && n < su){
      cdText = 'suhoor in <strong>'+fmtCD(su-n)+'</strong>';
    } else if(n < ift){
      cdText = 'iftar in <strong>'+fmtCD(ift-n)+'</strong>';
    } else {
      cdText = 'may your fast have been blessed \u2728';
    }
    ramEl.innerHTML =
      '<div class="ram-day-tag" style="margin-top:.6rem">\u262A '+TODAY_R[1]+' of Ramadan</div>'+
      '<div class="ram-line">suhoor <strong>'+suhoor+'</strong> \u00B7 iftar <strong>'+iftar+'</strong></div>'+
      '<div class="ram-line" style="font-size:.72rem;margin-top:2px">'+cdText+'</div>';
  }
  updateCD();
  setInterval(updateCD, 30000);

  // Prayer times tooltip on crescent tap
  if(!DAY){
    const labels=['Suhoor','Fajr','Dhuhr','Asr','Maghrib','Isha'];
    const tip = document.getElementById('pt-tip');
    let rows = '';
    for(let i=0;i<6;i++){
      rows += '<div class="pt-row"><span>'+labels[i]+'</span><span>'+TODAY_R[i+2]+'</span></div>';
    }
    rows += '<div class="pt-credit"><a href="https://www.islamic-relief.org.uk/giving/islamic-giving/ramadan/ramadan-timetable/bath/" target="_blank" rel="noopener">Bath \u00B7 Islamic Relief</a></div>';
    tip.innerHTML = rows;

    document.getElementById('tap-hint').textContent = 'tap \u262A';

    moonEl.addEventListener('click', function(e){
      e.stopPropagation();
      tip.classList.toggle('show');
    });
    document.addEventListener('click', function(){
      tip.classList.remove('show');
    });
  }
} else {
  // No Ramadan
  msgEl.innerHTML = DAY
    ? 'wishing you the loveliest of days,<br/><span class="hl">I hope this brings you good luck</span><br/>today, tomorrow, and always'
    : 'sweet dreams tonight,<br/><span class="hl">I hope this brings you good luck</span><br/>tonight, tomorrow, and always';
}

// Also show crescent during day in Ramadan (replacing sun concept? no, keep sun but add small crescent)
// Actually let's keep it simple: sun during day, crescent at night during Ramadan

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SPOTS (wings only, below head)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const SP=[
  {cx:35,cy:44,r:5.5},{cx:65,cy:44,r:5.5},
  {cx:30,cy:55,r:5},{cx:70,cy:55,r:5},
  {cx:42,cy:58,r:4.5},{cx:58,cy:58,r:4.5},
  {cx:35,cy:70,r:4},{cx:65,cy:70,r:4},
  {cx:45,cy:78,r:3.5},{cx:55,cy:78,r:3.5},
  {cx:50,cy:48,r:3},
];
function genSpots(){
  const g=document.getElementById('spots');g.innerHTML='';
  SP.forEach((s,i)=>{
    if(Math.random()<.7){
      const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',s.cx);c.setAttribute('cy',s.cy);c.setAttribute('r',s.r);
      c.setAttribute('fill','#222');c.classList.add('sp');
      c.style.animationDelay=(.07*i)+'s';c.style.transformOrigin=s.cx+'px '+s.cy+'px';
      g.appendChild(c);
    }
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NIGHT: Stars G(n,p)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function drawStars(){
  const svg=document.getElementById('cv'),w=innerWidth,h=innerHeight;
  svg.setAttribute('viewBox','0 0 '+w+' '+h);
  svg.querySelectorAll('.en,.nn').forEach(e=>e.remove());

  const stars=[],cx=w/2,cy=h/2;let a=0;
  while(stars.length<25&&a<600){a++;
    const x=15+Math.random()*(w-30),y=10+Math.random()*(h-20);
    if(Math.hypot(x-cx,y-cy)<Math.min(w,h)*.18)continue;
    if(stars.some(s=>Math.hypot(x-s.x,y-s.y)<38))continue;
    stars.push({x,y,r:1+Math.random()*2.5,d:Math.random()*3});
  }

  const md=Math.min(w,h)*.33;let ei=0;
  for(let i=0;i<stars.length;i++)for(let j=i+1;j<stars.length;j++){
    const a=stars[i],b=stars[j];
    if(Math.hypot(a.x-b.x,a.y-b.y)>md)continue;
    if(Math.random()<.35){
      const l=document.createElementNS('http://www.w3.org/2000/svg','line');
      l.setAttribute('x1',a.x);l.setAttribute('y1',a.y);l.setAttribute('x2',b.x);l.setAttribute('y2',b.y);
      l.classList.add('en');l.style.animationDelay=(ei*.025)+'s';svg.appendChild(l);ei++;
    }
  }
  stars.forEach(s=>{
    const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
    c.setAttribute('cx',s.x);c.setAttribute('cy',s.y);c.setAttribute('r',s.r);
    c.classList.add('nn');c.style.animationDelay=s.d+'s';c.style.animationDuration=(2+Math.random()*2)+'s';
    svg.appendChild(c);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DAY: Grass G(n,p)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const GC=['#81C784','#66BB6A','#4CAF50','#43A047','#388E3C','#2E7D32','#558B2F','#689F38','#7CB342','#33691E'];
function drawGrass(){
  const svg=document.getElementById('cv'),w=innerWidth,h=innerHeight;
  svg.setAttribute('viewBox','0 0 '+w+' '+h);
  svg.querySelectorAll('.gb,.ed,.nd,.gg').forEach(e=>e.remove());

  const bl=[],top_=h*.6,bot=h+8,count=Math.max(50,Math.round(w/9));
  for(let i=0;i<count;i++){
    const bx=w*.01+Math.random()*w*.98,by=top_+Math.random()*(bot-top_)*.45;
    const dp=(by-top_)/(bot-top_),ht=30+Math.random()*60+dp*30;
    const ln=(Math.random()-.5)*40,tx=bx+ln,ty=by-ht;
    bl.push({bx,by,tx,ty,cx:bx+ln*.55,cy:by-ht*.55,
      col:GC[Math.floor(Math.random()*GC.length)],
      th:1.5+Math.random()*1.5+dp*2,sw:1.2+Math.random()*3,
      sd:2.5+Math.random()*2.5,sdl:Math.random()*4,dp});
  }
  bl.sort((a,b)=>a.dp-b.dp);

  // Ground
  const gr=document.createElementNS('http://www.w3.org/2000/svg','rect');
  gr.setAttribute('x',0);gr.setAttribute('y',h*.84);gr.setAttribute('width',w);gr.setAttribute('height',h*.18);
  gr.setAttribute('fill','#66BB6A');gr.setAttribute('opacity','.15');gr.setAttribute('rx','8');gr.classList.add('gg');
  svg.appendChild(gr);

  // Dew edges
  const md=95;let ei=0;
  for(let i=0;i<bl.length;i++)for(let j=i+1;j<bl.length;j++){
    const a=bl[i],b=bl[j];
    if(Math.hypot(a.tx-b.tx,a.ty-b.ty)>md)continue;
    if(Math.random()<.3){
      const l=document.createElementNS('http://www.w3.org/2000/svg','line');
      l.setAttribute('x1',a.tx);l.setAttribute('y1',a.ty);l.setAttribute('x2',b.tx);l.setAttribute('y2',b.ty);
      l.classList.add('ed');l.style.animationDelay=(ei*.015)+'s';svg.appendChild(l);ei++;
    }
  }

  // Blades
  bl.forEach(b=>{
    const p=document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d','M'+b.bx+','+b.by+' Q'+b.cx+','+b.cy+' '+b.tx+','+b.ty);
    p.setAttribute('stroke',b.col);p.setAttribute('stroke-width',b.th);p.classList.add('gb');
    p.style.setProperty('--sw',b.sw+'deg');p.style.setProperty('--dur',b.sd+'s');
    p.style.setProperty('--del',b.sdl+'s');p.style.setProperty('--ox',b.bx+'px');
    p.style.setProperty('--oy',b.by+'px');p.style.opacity=.45+b.dp*.55;
    svg.appendChild(p);
  });

  // Dew nodes
  bl.forEach(b=>{
    const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
    c.setAttribute('cx',b.tx);c.setAttribute('cy',b.ty);c.setAttribute('r',2+b.dp*.8);
    c.classList.add('nd');c.style.animationDelay=(Math.random()*3)+'s';
    c.style.animationDuration=(2+Math.random()*2.5)+'s';svg.appendChild(c);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT ‚Äî everything random on load
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
genSpots();
if(DAY) drawGrass(); else drawStars();
</script>
</body>
</html>
